@using System.Drawing;
@using System.Web.UI.WebControls;
<!DOCTYPE html>

<html>
<head>
    <meta charset="UTF-8" />
    <title>@ViewBag.Title</title>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    @Scripts.Render("~/bundles/jquery")
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    @RenderSection("Head", required: false)

    @Html.DevExpress().GetStyleSheets(
        new StyleSheet { ExtensionSuite = ExtensionSuite.Icons },
        new StyleSheet { ExtensionSuite = ExtensionSuite.NavigationAndLayout },
        new StyleSheet { ExtensionSuite = ExtensionSuite.Editors },
        new StyleSheet { ExtensionSuite = ExtensionSuite.HtmlEditor },
        new StyleSheet { ExtensionSuite = ExtensionSuite.GridView },
        new StyleSheet { ExtensionSuite = ExtensionSuite.PivotGrid },
        new StyleSheet { ExtensionSuite = ExtensionSuite.Chart },
        new StyleSheet { ExtensionSuite = ExtensionSuite.Report },
        new StyleSheet { ExtensionSuite = ExtensionSuite.Scheduler },
        new StyleSheet { ExtensionSuite = ExtensionSuite.TreeList },
        new StyleSheet { ExtensionSuite = ExtensionSuite.RichEdit },
        new StyleSheet { ExtensionSuite = ExtensionSuite.Spreadsheet },
        new StyleSheet { ExtensionSuite = ExtensionSuite.SpellChecker }
    )
    @Html.DevExpress().GetScripts(
        new Script { ExtensionSuite = ExtensionSuite.Icons },
        new Script { ExtensionSuite = ExtensionSuite.NavigationAndLayout },
        new Script { ExtensionSuite = ExtensionSuite.HtmlEditor },
        new Script { ExtensionSuite = ExtensionSuite.GridView },
        new Script { ExtensionSuite = ExtensionSuite.PivotGrid },
        new Script { ExtensionSuite = ExtensionSuite.Editors },
        new Script { ExtensionSuite = ExtensionSuite.Chart },
        new Script { ExtensionSuite = ExtensionSuite.Report },
        new Script { ExtensionSuite = ExtensionSuite.Scheduler },
        new Script { ExtensionSuite = ExtensionSuite.TreeList },
        new Script { ExtensionSuite = ExtensionSuite.RichEdit },
        new Script { ExtensionSuite = ExtensionSuite.Spreadsheet },
        new Script { ExtensionSuite = ExtensionSuite.SpellChecker }
    )

    @{
        string Action = Convert.ToString(ViewContext.RouteData.Values["action"]), Controller = Convert.ToString(ViewContext.RouteData.Values["controller"]), Id = Convert.ToString(ViewContext.RouteData.Values["id"]);
        <script type="text/javascript">
            var apiUrl = '@System.Configuration.ConfigurationManager.AppSettings["API_URL"].ToString()';
            var webUrl = '', cmdName = '', cmdText = '';
            var action = '@Action';
            var controller = '@Controller';
            var id = '@Id';
            @*var webUrl = '@System.Configuration.ConfigurationManager.AppSettings["WEB_URL"].ToString()';*@

            function onCommandExecuted(s, e) {
                cmdName = e.item.name;
                cmdText = (e.item.text !== null && e.item.text !== '' && e.item.text.length > 0) ? e.item.text : '';
                cmdText = ((cmdText === '' || cmdText.length === 0) && (e.parameter !== null && e.parameter.toString() !== '' && e.parameter.toString().length > 0)) ? e.parameter.toString() : '';

                if (cmdName.toLowerCase() === "formview" || cmdName.toLowerCase() === "new") {
                    cmdName = '';
                    window.location.href = '@Url.Action("Create", Controller)';
                }
                else if (cmdName.toLowerCase() === "datasheetview") {
                    cmdName = '';
                    window.location.href = '@Url.Action("Index", Controller)';
                }
                else if (cmdName.toLowerCase() === "refreshall" || cmdName.toLowerCase() === "removesort") {
                    cmdName = '';
                    window.location.href = window.location.toString();
                }
                else if (cmdName.toLowerCase() === "delete") {
                    cmdName = '';
                    if (parseInt(id) > 0 && confirm('Do you really want to delete this record?'))
                        window.location.href = '@Url.Action("Delete", Controller, new { Id = Id })';
                }
                else if (cmdName.toLowerCase() === "save" && (action.toLowerCase() === "create" || action.toLowerCase() === "edit")) {
                    cmdName = '';
                    $('#frm' + controller.toString()).submit();
                }
                else if (cmdName.toLowerCase() === "advanced") {
                    cmdName = '';
                    grid.SetFilterEnabled(true);
                    grid.ShowFilterControl();
                    //grid.ApplyFilter();
                }
                else if (cmdName.toLowerCase() === "clearfilter") {
                    cmdName = '';
                    grid.SetFilterEnabled(false);
                    grid.CloseFilterControl();
                    grid.ClearFilter();
                    grid.Refresh();
                }
                else if (cmdName.toLowerCase() === "togglefilter") {
                    cmdName = '';

                    $.ajax({
                        url: '@Url.Action("SetGridProperties", Controller)',
                        type: "GET",
                        dataType: "json",
                        traditional: true,
                        contentType: "application/json; charset=utf-8",
                        success: function (res) {
                            if (res) {
                                window.location.href = '@Url.Action("Index", Controller)';
                            }
                        }
                    });
                }
                else if (cmdName.toLowerCase() === "choosecolumns") {
                    cmdName = '';
                    $('#btnPopup').click();
                }

            }

        </script>
    }

    <style type="text/css">
        .error {
            color: red;
        }
    </style>

</head>
<body>
    @Html.Partial("_Ribbon")

    @Html.DevExpress().Splitter(settings =>
{
    settings.Name = "splOverview";
    settings.Height = Unit.Percentage(100);
    settings.FullscreenMode = true;

    settings.Panes.Add(pane =>
    {
        pane.Size = Unit.Percentage(15);
        pane.MinSize = 225;
        pane.MaxSize = 275;
        pane.ScrollBars = ScrollBars.Auto;
        pane.SetContent(() =>
        {
            Html.RenderPartial("_NavBar");
        });
    });


    settings.Panes.Add(pane =>
    {
        pane.Name = "gridContainer";
        pane.Size = Unit.Percentage(85);
        pane.MinSize = 600;
        pane.AutoHeight = true;
        pane.AutoWidth = true;
        //pane.SetContent(RenderBody().ToHtmlString() + Html.Partial("_Common"));
        pane.SetContent(() =>
        {
            ViewContext.Writer.Write(
                @RenderBody()
            );
            ViewContext.Writer.Write(
                @RenderSection("SectionViewStart", required: false)
            );
            if (ViewData["PartialView"] != null && ViewData["PartialView"].ToString() != "")
            {
                Html.RenderPartial(ViewData["PartialView"].ToString());
                ViewData["PartialView"] = "";
            }
            ViewContext.Writer.Write(
                @RenderSection("SectionViewEnd", required: false)
            );
        });
    });



}).GetHtml()

    @*@Html.DevExpress().Splitter(settings =>
        {
            settings.Name = "ContentSplitter";
            settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);
            settings.Height = System.Web.UI.WebControls.Unit.Percentage(100);
            settings.Styles.Pane.Paddings.Padding = System.Web.UI.WebControls.Unit.Pixel(0);
            settings.Styles.Pane.Border.BorderWidth = System.Web.UI.WebControls.Unit.Pixel(0);
            settings.ClientSideEvents.PaneResized = "function(s, e) { if(window.GridView && e.pane.name == 'ContentCenter') GridView.SetHeight(e.pane.GetClientHeight()); }";

            settings.AllowResize = false;
            settings.Orientation = System.Web.UI.WebControls.Orientation.Vertical;
            settings.FullscreenMode = true;
            settings.SeparatorVisible = false;
            //settings.Panes.Add(subpane => {
            //    subpane.Name = "ContentLeft";
            //    subpane.PaneStyle.CssClass = "leftPane";
            //    subpane.ShowCollapseBackwardButton = DefaultBoolean.False;
            //    subpane.Size = System.Web.UI.WebControls.Unit.Pixel(200);
            //    subpane.MinSize = System.Web.UI.WebControls.Unit.Pixel(150);
            //    subpane.PaneStyle.Paddings.Padding = System.Web.UI.WebControls.Unit.Pixel(1);
            //    subpane.SetContent(() => {
            //        Html.RenderPartial("ContentLeftPartialView");
            //    });
            //});

            settings.Panes.Add(subpane =>
            {
                subpane.Name = "ContentCenter";
                subpane.PaneStyle.CssClass = "contentPane";
                subpane.ScrollBars = System.Web.UI.WebControls.ScrollBars.Auto;
                subpane.Separator.Visible = DefaultBoolean.True;
                subpane.Separator.SeparatorStyle.Border.BorderWidth = System.Web.UI.WebControls.Unit.Pixel(1);
                subpane.Separator.SeparatorStyle.BorderTop.BorderWidth = System.Web.UI.WebControls.Unit.Pixel(0);
                subpane.SetContent(RenderBody().ToHtmlString());
            });

        }).GetHtml()*@



    @RenderSection("Scripts", required: false)

    <div class="row">
        <div class="col-md-2">
            <!-- Trigger the modal with a button -->
            <button type="button" id="btnPopup" class="btn btn-default btn-md" data-toggle="modal" data-target="#Selection" style="display: none;">Popup</button>
            <!-- Modal -->
            <div class="modal fade" id="Selection" role="dialog" data-backdrop="false">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">

                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title"><strong>Customize Contact List</strong></h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-3">
                                    <select name="cars" multiple size=10 style='height: 100%;margin-left:-15px;'>
                                        <option value="volvo">Company Name</option>
                                        <option value="saab">Country/Region Code</option>
                                        <option value="opel">Currency Code</option>
                                        <option value="audi">Fax Number</option>
                                        <option value="volvo">Language Code</option>
                                        <option value="saab">Mobile Number</option>
                                        <option value="opel">Zip Code</option>

                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <div class="row">
                                        <div class="col-md-3 form-group">
                                            <button type="button" class="btn btn-primary btn-sm">
                                                Add <span class="glyphicon glyphicon-menu-right"></span><span class="glyphicon glyphicon-menu-right"></span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <button type="button" class="btn btn-primary btn-sm">
                                                <span class="glyphicon glyphicon-menu-left"></span><span class="glyphicon glyphicon-menu-left"></span>Remove
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <select name="cars" multiple size=10 style='height: 100%;'>
                                        <option value="volvo">No.</option>
                                        <option value="saab">Name</option>
                                        <option value="opel">Phone No.</option>
                                        <option value="audi">SalesPerson Code</option>
                                        <option value="volvo">Territory Code</option>
                                        <option value="saab">Search Name</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <div class="row">
                                        <div class="col-md-3 form-group">
                                            <button type="button" class="btn btn-primary btn-sm">
                                                <span class="glyphicon glyphicon-circle-arrow-up"></span>&nbsp; Move Up
                                            </button>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <button type="button" class="btn btn-primary btn-sm">
                                                <span class="glyphicon glyphicon-circle-arrow-down"></span>&nbsp;Move Down
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <p>Hold down the Ctrl (windows) / Command (Mac) button to select multiple options.</p>
                                </div>
                            </div>


                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
                                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

</body>
</html>