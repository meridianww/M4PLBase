
@using M4PL.Web.Providers
@model M4PL.Web.Models.ReportResult<M4PL.APIClient.ViewModels.Job.JobReportView>
 
@Html.DevExpress().CallbackPanel(setings =>
{
    setings.Name = "OrginByCustomerCbPanel";
    setings.ControlStyle.CssClass = "custom-cb-panel-container";
    setings.CallbackRouteValues = new { Controller = Model.CallBackRoute.Controller, Action = "OrginByCustomer", Area = Model.CallBackRoute.Area, model = Newtonsoft.Json.JsonConvert.SerializeObject(Model.Record) };
    setings.SetContent(() =>
    {
        Html.DevExpress().Label(
                        settings =>
                        {
                            settings.Name = "lblOrigin";
                            settings.Text = "Origin";
                            settings.ControlStyle.CssClass = "job-advance-custom-lbl control-label inline-element";
                        }).GetHtml();
        Html.DevExpress().GridLookup(settings =>
        {
            //settings.Properties.Caption = "Origin :";

            settings.Name = "OriginByCustomerCbPanelforClosed";
            settings.ControlStyle.CssClass = "custom-cb-panel-child-container";
            settings.GridViewProperties.CallbackRouteValues = new { Controller = Model.CallBackRoute.Controller, Action = "OrginByCustomer", Area = Model.CallBackRoute.Area, model = Newtonsoft.Json.JsonConvert.SerializeObject(Model.Record) };

            settings.KeyFieldName = "Origin";
            settings.CommandColumn.Visible = true;
            settings.CommandColumn.ShowSelectCheckbox = true;
            settings.CommandColumn.Width = 30;
            settings.Columns.Add("Origin").Settings.AllowAutoFilter = DefaultBoolean.False;

            settings.Properties.SelectionMode = DevExpress.Web.GridLookupSelectionMode.Multiple;
            settings.Properties.TextFormatString = "{0}";
            settings.Properties.MultiTextSeparator = ", ";
            settings.Properties.Height = 30;
            settings.Properties.Width = System.Web.UI.WebControls.Unit.Percentage(100);
            settings.GridViewProperties.Settings.ShowFilterRow = true;
            settings.GridViewProperties.Settings.ShowStatusBar = GridViewStatusBarMode.Visible;
            settings.GridViewProperties.SettingsPager.EnableAdaptivity = true;
            settings.GridViewProperties.Settings.HorizontalScrollBarMode = ScrollBarMode.Auto;
            settings.GridViewProperties.Settings.VerticalScrollBarMode = ScrollBarMode.Auto;
            settings.GridViewProperties.SettingsPager.Mode = GridViewPagerMode.ShowAllRecords;
            settings.Properties.AllowUserInput = false;
            settings.GridViewClientSideEvents.SelectionChanged = "M4PLCommon.AdvancedReport.OrginOnSelectionChanged";
            settings.GridViewStyles.Header.Cursor = "default";
            settings.GridViewStyles.SelectedRow.Cursor = "pointer";
            settings.PreRender = (s, e) =>
            {
                MVCxGridLookup lookup = s as MVCxGridLookup;
                if (lookup.GridView.VisibleRowCount > 0 && Convert.ToBoolean(ViewData["isFirstLoadOrgin"]))
                {
                    lookup.GridView.Selection.SelectRow(0);
                }
            };
            settings.DataBound = (sender, e) =>
            {
                var gridLookup = (MVCxGridLookup)sender;
                gridLookup.GridView.Selection.SelectRowByKey(Model.Record.Origin);
            };
        }).BindList(ViewData["Origins"]).Bind(Model.Record.Origin).GetHtml();

    });
}).GetHtml()

