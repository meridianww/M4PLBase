@*Copyright (2016) Meridian Worldwide Transportation Group
    //All Rights Reserved Worldwide
    //====================================================================================================================================================
    //Program Title:                                Meridian 4th Party Logistics(M4PL)
    //Programmer:                                   Prasanta
    //Date Programmed:                              12/02/2020
    //Program Name:                                 CardViewPartial
    //Purpose:                                      Provides view for the grid View
    //====================================================================================================================================================*@

@using System.Collections
@using M4PL.Web.Providers
@using M4PL.Utilities;
@using M4PL.Entities.Support;
@using DevExpress.Data.Filtering.Helpers;
@using M4PL.Entities
@using M4PL.Web.Models;
@using M4PL.APIClient.ViewModels.Job;


@model CardViewResult<JobCardViewView>
<style>
    .card {
        position: relative;
        /*height: 130px !important;
        width: 200px !important;*/
        background-color: #fff !important;
        border: 1px solid #fff !important;
        width:100%;
    }
</style>
 
@Html.DevExpress().CardView(settings =>
{
    settings.Name = "CardView";
    settings.CallbackRouteValues = new {   Controller = "JobCardView",
        Action = "CardView",
        Area = "Job",
        OwnerCbPanel = "JobAdvanceReportCbPanel"
    };
    settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);

    settings.KeyFieldName = "Id";

    settings.SettingsPager.Visible = true;
    settings.SettingsBehavior.AllowSelectByCardClick = false;

    settings.SettingsPager.SettingsTableLayout.ColumnCount = 5;
    settings.SettingsPager.SettingsTableLayout.RowsPerPage = 5;
    settings.Styles.Card.CssClass = "card";
    settings.Styles.Card.BackColor = System.Drawing.Color.White;
    settings.Styles.Table.BackColor = System.Drawing.Color.White;
    settings.Columns.Add("Id");
    settings.Columns.Add("Name");
    settings.EnableCardsCache = false;
    settings.Settings.ShowGroupButtons = false;
    settings.Columns.Add(c =>
    {
        c.FieldName = "CardType";
        c.GroupIndex = 0;

    });

    settings.SetCardTemplateContent(t =>
    {

        Html.RenderPartial(MvcConstants.ViewJobCardViewContentPartial, Model.Records.Where(i => i.Id == Convert.ToInt32(t.KeyValue)).FirstOrDefault());
    });
    settings.Settings.ShowGroupSelector = false;

    settings.Settings.ShowHeaderPanel = false;
    settings.SettingsPager.Mode = GridViewPagerMode.ShowAllRecords;
    settings.Settings.LayoutMode = DevExpress.Web.Layout.Breakpoints;
    settings.Styles.BreakpointsCard.Height = 130;

    settings.SettingsAdaptivity.BreakpointsLayoutSettings.CardsPerRow = 5;
    settings.SettingsAdaptivity.BreakpointsLayoutSettings.Breakpoints.Add(1400, 4);
    settings.SettingsAdaptivity.BreakpointsLayoutSettings.Breakpoints.Add(900, 3);
    settings.SettingsAdaptivity.BreakpointsLayoutSettings.Breakpoints.Add(700, 2);
    settings.SettingsAdaptivity.BreakpointsLayoutSettings.Breakpoints.Add(500, 1);
    //settings.ClientSideEvents.SelectionChanged = "OnCardSelectionChanged";
}).Bind(Model.Records).GetHtml()

